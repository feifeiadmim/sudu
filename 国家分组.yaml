port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
dns:
  enable: true
  listen: '0.0.0.0:53'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - 8.8.8.8
    - 1.1.1.1

# 代理组配置
proxy-groups:
  # --- 核心策略组 ---
  - name: 节点选择
    type: select
    proxies:
      - 自动选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点
      - DIRECT
    include-all: true

  - name: 自动选择
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50
    include-all: true

  # --- 地区筛选组 (基于 ytoo.ini 正则) ---
  - name: 香港节点
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    include-all: true
    filter: "港|HK|Hong Kong"

  - name: 日本节点
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    include-all: true
    filter: "日((?!用).)+|[^-]日|东京|大阪|埼玉|JP|Japan"

  - name: 新加坡节点
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    include-all: true
    filter: "新|新加坡|狮城|SG|Singapore"

  - name: 台湾节点
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    include-all: true
    filter: "台|台湾|台灣|新北|彰化|深台|CHT|HINET|TW|Taiwan"

  - name: 美国节点
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    include-all: true
    filter: "美|洛杉矶|圣何塞|西雅图|US|USA|United States"

  # --- 特定服务分组 ---
  - name: 油管视频
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点
  
  - name: 奈飞影视
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: 迪士尼
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: 哔哩哔哩
    type: select
    proxies:
      - DIRECT
      - 香港节点
      - 台湾节点

  - name: OpenAI
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: PayPal
    type: select
    proxies:
      - 节点选择
      - DIRECT
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: 电报消息
    type: select
    proxies:
      - 节点选择
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: 苹果服务
    type: select
    proxies:
      - 节点选择
      - DIRECT
      - 香港节点
      - 日本节点
      - 新加坡节点
      - 台湾节点
      - 美国节点

  - name: Spotify
    type: select
    proxies:
      - 节点选择
      - DIRECT

  - name: 微软服务
    type: select
    proxies:
      - 节点选择
      - DIRECT

  - name: 漏网之鱼
    type: select
    proxies:
      - 节点选择
      - DIRECT

# 规则集配置
rule-providers:
  Netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Netflix.list"
    path: ./ruleset/Netflix.yaml
    interval: 86400

  YouTube:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/YouTube.yaml"
    path: ./ruleset/YouTube.yaml
    interval: 86400

  Disney:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Disney.yaml"
    path: ./ruleset/Disney.yaml
    interval: 86400

  Bilibili:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/Bilibili.yaml
    interval: 86400

  OpenAI:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./ruleset/OpenAI.yaml
    interval: 86400

  PayPal:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"
    path: ./ruleset/PayPal.yaml
    interval: 86400

  Telegram:
    type: http
    behavior: classical
    url: "https://kelee.one/Tool/Clash/Rule/Telegram.yaml"
    path: ./ruleset/Telegram.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Spotify.yaml"
    path: ./ruleset/Spotify.yaml
    interval: 86400

  Apple:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Apple.yaml"
    path: ./ruleset/Apple.yaml
    interval: 86400

  Microsoft:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml
    interval: 86400

  Google:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Google.yaml"
    path: ./ruleset/Google.yaml
    interval: 86400

  Domestic:
    type: http
    behavior: classical
    url: "https://rule.kelee.one/Clash/Direct.yaml"
    path: ./ruleset/Domestic.yaml
    interval: 86400

# 规则配置
rules:
  - "RULE-SET,Netflix,奈飞影视"
  - "RULE-SET,Disney,迪士尼"
  - "RULE-SET,Bilibili,哔哩哔哩"
  - "RULE-SET,YouTube,油管视频"
  - "RULE-SET,Spotify,Spotify"
  - "RULE-SET,OpenAI,OpenAI"
  - "RULE-SET,PayPal,PayPal"
  - "RULE-SET,Telegram,电报消息"
  - "RULE-SET,Microsoft,微软服务"
  - "RULE-SET,Apple,苹果服务"
  - "RULE-SET,Google,节点选择"
  - "RULE-SET,Domestic,DIRECT"
  - "GEOIP,CN,DIRECT"
  - "MATCH,漏网之鱼"
